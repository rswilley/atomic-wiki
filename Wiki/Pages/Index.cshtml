@page
@model IndexModel
@{
    ViewData["Title"] = "Home";
}

<h1 class="h4 mb-3">Today in Atomic Wiki</h1>

<div class="row g-3">
    <div class="col-lg-8">
        <!-- Recent notes -->
        <section class="mb-4">
            <h2 class="h6 text-muted mb-2">Recent Notes</h2>

            <ul class="list-group list-group-flush">
                @foreach (var note in Model.HomeModel.Recent)
                {
                    <li class="list-group-item px-0">
                        <a asp-page="/View" 
                           asp-route-permanentId="@note.Id"
                           asp-route-slug="@note.Slug"
                           class="fw-semibold d-block">
                            @note.Title
                        </a>
                        <small class="text-muted">
                            Last updated @note.UpdatedAt?.ToString("yyyy-MM-dd")
                            @if (!string.IsNullOrEmpty(note.Tags))
                            {
                                <text>• tags: @note.Tags</text>
                            }
                        </small>
                    </li>   
                }
            </ul>
        </section>

        <!-- Pinned -->
        <section>
            <h2 class="h6 text-muted mb-2">Pinned</h2>
            
            <div class="row g-2">
                @foreach (var note in Model.HomeModel.Pinned)
                {
                    <div class="col-md-6">
                        <div class="card card-body py-2">
                            <a asp-page="/View" 
                               asp-route-permanentId="@note.Id"
                               asp-route-slug="@note.Slug"
                               class="fw-semibold">
                                @note.Title
                            </a>
                            <small class="text-muted d-block">
                                @if (!string.IsNullOrEmpty(note.Tags))
                                {
                                    <text>tags: @note.Tags</text>
                                }
                            </small>
                        </div>
                    </div>
                }
            </div>
        </section>
    </div>

    <div class="col-lg-4">
        <!-- Quick actions -->
        <section class="mb-3">
            <h2 class="h6 text-muted mb-2">Quick Actions</h2>
            <div class="d-grid gap-2">
                <a asp-page="/Compose" asp-route-type="note" class="btn btn-sm btn-primary">New Note</a>
                <a asp-page="/Compose" asp-route-type="post" class="btn btn-sm btn-outline-secondary">New Post</a>
                <a asp-page="/Compose" asp-route-type="journal" class="btn btn-sm btn-outline-secondary">New Journal Entry</a>
            </div>
        </section>

        <!-- Stats -->
        <section>
            <h2 class="h6 text-muted mb-2">Stats</h2>
            <ul class="list-unstyled small mb-0">
                <li>
                    <strong>@Model.HomeModel.NoteCount</strong> 
                    @if (Model.HomeModel.NoteCount == 1)
                    {
                        <text>note</text>
                    }
                    else
                    {
                        <text>notes</text>
                    }
                </li>
                <li>
                    <strong>@Model.HomeModel.PostCount</strong> 
                    @if (Model.HomeModel.PostCount == 1)
                    {
                        <text>post</text>
                    }
                    else
                    {
                        <text>posts</text>
                    }
                </li>
                <li>
                    <strong>@Model.HomeModel.JournalCount</strong> 
                    @if (Model.HomeModel.JournalCount == 1)
                    {
                        <text>journal entry</text>
                    }
                    else
                    {
                        <text>journal entries</text>
                    }
                </li>
                <li>
                    <strong>@Model.HomeModel.CategoryCount</strong>
                    @if (Model.HomeModel.CategoryCount == 1)
                    {
                        <text>category</text>
                    }
                    else
                    {
                        <text>categories</text>
                    }
                </li>
                <li>
                    <strong>@Model.HomeModel.TagCount</strong> 
                    @if (Model.HomeModel.TagCount == 1)
                    {
                        <text>tag</text>
                    }
                    else
                    {
                        <text>tags</text>
                    }
                </li>
            </ul>
        </section>
    </div>
</div>
